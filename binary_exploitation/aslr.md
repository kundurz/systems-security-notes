# Address Space Layout Randomization

 Memory corruption often focuses on corrupting *pointers* to point somewhere else
* What if we randomize the location of code, and data in memory? What can the attacker point to? 

#### ASLR (History)
* First appeared in 2001 as a Linux kernel patch set called PaX. 
* Written by a team led by an anonymous coder
* PaX also brought DEP to Linux

#### ASLR Workarounds
* How do you redirect execution if you dont know where any code is?
* Method 1: Leak
	* The addresses still (mostly) have to be in memory so that the program can find its own assets
	* Let's leak them out!
* Method 2: YOLO
	* Program assets are *page-aligned* 
	* Let's overwrite just the page offset
	* Requires some brute-forcing
* Method 3 (situational): brute-force
	```c
	int main() {
		char buf[16];
		if (fork()) { wait(0); }
		else { read(0, buf, 128); return; }
	}
	```

#### Overwriting Page Offsets
* Pages are always aligned to a `0x1000` alignment
* If we overwrite the two least significant bytes of a pointer we only have to brute force one nibble (16 possible values) to successfully redirect the pointer to another location on the same page
* With little endian, these are the first two bytes that we will overwrite.
